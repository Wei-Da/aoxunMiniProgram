<view class="container"><u-toast vue-id="0c88c99c-1" ref="__r" data-ref="uToast" onVueInit="__l"></u-toast><u-modal vue-id="0c88c99c-2" title="{{服务增派}}" show-title="{{true}}" show-cancel-button="{{true}}" mask-close-able="{{true}}" value="{{transferHidden}}" data-event-opts="{{[['^confirm',[['modalTransferChange']]],['^cancel',[['modalTransferCancel']]],['^input',[['__set_model',['','transferHidden','$event',[]]]]]]}}" onConfirm="__e" onCancel="__e" onInput="__e" onVueInit="__l"><view class="input-list slot-content"><view class="input-item"><text class="input-item-lable">选择部门</text><picker class="input-item-content" data-pickername="companyDept" value="{{companyDeptIndex}}" range="{{companyDepts}}" mode="selector" data-event-opts="{{[['change',[['bindPickerChange',['$event']]]]]}}" onChange="__e"><view>{{''+(companyDepts[companyDeptIndex]||"")+''}}</view></picker></view><view class="input-item"><text class="input-item-lable">选择人员</text><picker class="input-item-content" data-pickername="companyMember" value="{{companyMemberIndex}}" range="{{companyMembers}}" mode="selector" data-event-opts="{{[['change',[['bindPickerChange',['$event']]]]]}}" onChange="__e"><view>{{''+(companyMembers[companyMemberIndex]||"")+''}}</view></picker></view></view></u-modal><u-modal vue-id="0c88c99c-3" title="{{服务变更}}" show-title="{{true}}" show-cancel-button="{{true}}" mask-close-able="{{true}}" value="{{changeHidden}}" data-event-opts="{{[['^confirm',[['modalServiceChange']]],['^input',[['__set_model',['','changeHidden','$event',[]]]]]]}}" onConfirm="__e" onInput="__e" onVueInit="__l"><view class="input-list slot-contents"><view class="input-item"><text class="input-item-lable">变更类型</text><picker class="input-item-content" data-pickername="changeType" value="{{changeTypeIndex}}" range="{{changeTypes}}" mode="selector" data-event-opts="{{[['change',[['bindPickerChange',['$event']]]]]}}" onChange="__e"><view>{{''+(changeTypes[changeTypeIndex]||"")+''}}</view></picker></view><block a:if="{{isPersonChange}}"><view class="input-item"><text class="input-item-lable">选择部门</text><picker class="input-item-content" data-pickername="companyDeptChange" value="{{companyDeptChangeIndex}}" range="{{changeCompanyDepts}}" mode="selector" data-event-opts="{{[['change',[['bindPickerChange',['$event']]]]]}}" onChange="__e"><view>{{''+(changeCompanyDepts[companyDeptChangeIndex]||"")+''}}</view></picker></view></block><block a:if="{{isPersonChange}}"><view class="input-item"><text class="input-item-lable">选择人员</text><picker class="input-item-content" data-pickername="companyMemberChange" value="{{companyMemberChangeIndex}}" range="{{changeCompanyMembers}}" mode="selector" data-event-opts="{{[['change',[['bindPickerChange',['$event']]]]]}}" onChange="__e"><view>{{''+(changeCompanyMembers[companyMemberChangeIndex]||"")+''}}</view></picker></view></block><block a:if="{{!isPersonChange}}"><view class="input-item"><text class="input-item-lable">当前权重</text><text class="input-item-content" value="{{weight}}">{{weight}}</text></view></block><block a:if="{{!isPersonChange}}"><view class="input-item"><text class="input-item-lable">修改权重</text><input class="input-item-content" type="number" data-event-opts="{{[['input',[['getNewWeight',['$event']]]]]}}" onInput="__e"/></view></block><view class="input-item"><text class="input-item-lable">变更描述</text><text style="flex:1;text-align:right;" type="text" data-event-opts="{{[['tap',[['transferDescribe',['$event']]]]]}}" onTap="__e">{{serviceDescribe}}</text><image class="transfer_image" src="../../static/images/transfer.png"></image></view></view></u-modal><view class="service-title"><view class="left"><text>{{"负责人员："+servicer}}</text><text>{{"公司名称："+companyName}}</text><text>{{"联系电话："+phoneNo}}</text></view><view class="right"><image class="right-img" src="../../static/images/event_center_icon.png" mode="aspectFit"></image></view></view><view class="content"><view class="tab-bar"><text data-event-opts="{{[['tap',[['switchTabBar',[0]]]]]}}" class="{{(('tab-bar-item')+' '+((currentIndex===0)?'on':''))}}" onTap="__e">服务内容</text><text data-event-opts="{{[['tap',[['switchTabBar',[1]]]]]}}" class="{{(('tab-bar-item')+' '+((currentIndex===1)?'on':''))}}" onTap="__e">服务进度</text><text data-event-opts="{{[['tap',[['switchTabBar',[2]]]]]}}" class="{{(('tab-bar-item')+' '+((currentIndex===2)?'on':''))}}" onTap="__e">关联资产</text><text data-event-opts="{{[['tap',[['switchTabBar',[3]]]]]}}" class="{{(('tab-bar-item')+' '+((currentIndex===3)?'on':''))}}" onTap="__e">处理记录</text><text data-event-opts="{{[['tap',[['switchTabBar',[4]]]]]}}" class="{{(('tab-bar-item')+' '+((currentIndex===4)?'on':''))}}" onTap="__e">知识库</text><form report-submit="true" data-event-opts="{{[['submit',[['moreOperation',['$event']]]]]}}" onSubmit="__e"><button class="tab-bar-btn" style="height:60rpx;" form-type="submit" data-event-opts="{{[['tap',[['showActionSheet',['$event']]]]]}}" onTap="__e">操作</button></form><u-action-sheet vue-id="0c88c99c-4" list="{{actionSheetItems}}" value="{{actionSheetHidden}}" data-event-opts="{{[['^click',[['clickActionSheet']]],['^input',[['__set_model',['','actionSheetHidden','$event',[]]]]]]}}" onClick="__e" onInput="__e" onVueInit="__l"></u-action-sheet></view><view class="divider"></view><block a:if="{{currentIndex===0}}"><view class="service-content"><view class="assert-title"><image class="assert-title-image" src="../../static/images/service_detail.png"></image><text class="assert-title-text">内容详情</text></view><view class="assert-content-group"><view class="assert-content-item"><view class="key">标题</view><view class="value">{{': '+(faultInfo.title||"")+''}}</view></view><view class="assert-content-item"><view class="key">报修人</view><view class="value">{{': '+(faultInfo.repairmanName||"")+''}}</view></view><view class="assert-content-item"><view class="key">公司名称</view><view class="value">{{': '+(faultInfo.companyName||"")+''}}</view></view><view class="assert-content-item"><view class="key">联系电话</view><view class="value">{{': '+(faultInfo.repairmanPhone||"")+''}}</view></view><view class="assert-content-item"><view class="key">故障等级</view><view class="value">{{': '+(faultInfo.faultLevel||"")+''}}</view></view><view class="assert-content-item"><view class="key">来源</view><view class="value">{{': '+(faultInfo.faultFrom||"")+''}}</view></view><view class="assert-content-item"><view class="key">故障时间</view><view class="value">{{': '+(faultInfo.faultDate||"")+''}}</view></view><view class="assert-content-item"><view class="key">影响度</view><view class="value">{{': '+(faultInfo.effect||"")+''}}</view></view><view class="assert-content-item"><view class="key">服务目录</view><view class="value">{{': '+(faultInfo.serviceListName||"")+''}}</view></view><view class="assert-content-item"><view class="key">权重</view><view class="value">{{': '+(faultInfo.weight||"")+''}}</view></view><view class="assert-content-item"><view class="key">最近更新</view><view class="value">{{': '+(faultInfo.dualDate||"")+''}}</view></view><view class="divider"></view><view class="service_fault_group"><view class="service_fault_content">故障内容:</view><view class="service_fault_content">{{''+(faultInfo.faultContent||"")+''}}</view></view><view class="divider"></view><view class="assert-content-item"><view class="key">语音描述</view><block a:if="{{audioPath==''}}"><view class="value">: 暂无</view></block><block a:else><view data-event-opts="{{[['tap',[['bindtapPlayAudio',['$event']]]]]}}" class="value" onTap="__e"><image class="audio_image" src="../../static/images/audio_icon.png"></image><text>: 语音</text><image class="record_image" src="{{getAudioImg}}"></image></view></block></view><view class="divider"></view><view class="service_image_content"><text class="service_image_content_title">服务图片:</text><block a:if="{{pictures.length!=0}}"><view class="img-upload"><view data-event-opts="{{[['tap',[['previewImage',['$0'],[[['pictures','',index]]]]]]]}}" class="img-item" onTap="__e" a:for="{{pictures}}" a:for-item="item" a:for-index="index" a:key="index"><image src="{{item}}" mode="aspectFill"></image></view></view></block><block a:if="{{pictures.length==0}}"><view class="img-upload"><view class="img-item"><image src="../../static/images/no_image.png"></image></view></view></block></view><view class="divider"></view><view class="service_image_content"><text class="service_image_content_title">验收图片:</text><block a:if="{{checkPicture.length!=0}}"><view class="img-upload"><view data-event-opts="{{[['tap',[['previewImage',['$0'],[[['checkPicture','',index]]]]]]]}}" class="img-item" onTap="__e" a:for="{{checkPicture}}" a:for-item="item" a:for-index="index" a:key="index"><image src="item" mode="aspectFill"></image></view></view></block><block a:if="{{checkPicture.length==0}}"><view class="img-upload"><view class="img-item"><image src="../../static/images/no_image.png"></image></view></view></block></view></view></view></block><block a:if="{{currentIndex===1}}"><view class="service-content"><view class="assert-title"><image class="assert-title-image" src="../../static/images/process_steps.png"></image><text class="assert-title-text">服务进度</text><text>{{'('+(personName||'工程师未确认')+")"}}</text></view><swiper class="step-group" style="{{'height:'+(mHeight+'rpx')+';'}}" duration="300" data-event-opts="{{[['change',[['bindchangeSwiper',['$event']]]]]}}" onChange="__e"><block a:for="{{serviceSteps}}" a:for-item="steps" a:for-index="index" a:key="index"><swiper-item><scroll-view class="scoll-h" scroll-y="true"><view class="step-item" a:for="{{steps}}" a:for-item="item" a:for-index="index" a:key="index"><view class="step-line-view"><block a:if="{{item.isPass}}"><image class="line-image" src="../../static/images/pass_step.png"></image></block><block a:else><image class="line-image" src="../../static/images/unpass_step.png"></image></block><block a:if="{{index==0}}"><view class="step-half-line"></view></block><block a:else><block a:if="{{index==steps.length-1}}"><view><block a:if="{{item.isPass}}"><view class="step-half-bottom-line"></view></block><block a:if="{{!item.isPass}}"><view class="step-half-bottom-line-gray"></view></block></view></block><block a:else><view><block a:if="{{item.isPass}}"><view class="step-line"></view></block><block a:if="{{!item.isPass}}"><view class="step-line-gray"></view></block></view></block></block></view><view class="setp-content"><view class="setp-content-detail"><text class="info-text-step">{{item.processName}}</text><block a:if="{{item.isPass&&item.stage==6}}"><text class="info-text-step">{{item.serviceContent}}</text></block><block a:if="{{item.isPass&&item.stage==6}}"><text class="info-text-step">{{item.addr}}</text></block><text class="info-text-step">{{item.dualdate}}</text></view><view class="setp-content-image-view"><block a:if="{{item.isPass&&item.stage==6}}"><image class="setp-content-image" src="{{requestAddress+item.imageUrl}}" data-event-opts="{{[['tap',[['previewSignIMage',['$event']]]]]}}" onTap="__e"></image></block></view></view></view></scroll-view></swiper-item></block></swiper></view></block><block a:if="{{currentIndex===2}}"><view class="service-content"><view class="assert-title"><image class="assert-title-image" src="../../static/images/service_detail.png"></image><text class="assert-title-text">资产信息</text></view><view class="assert-content-group"><view class="assert-content-item"><view class="key">负责人</view><view class="value">{{': '+(equmentInfo.personName||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">公司名称</view><view class="value">{{': '+(equmentInfo.companyName||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">部门</view><view class="value">{{': '+(equmentInfo.deptName||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">联系电话</view><view class="value">{{': '+(equmentInfo.personPhone||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">设备类型</view><view class="value">{{': '+(equmentInfo.deviceType||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">设备名称</view><view class="value">{{': '+(equmentInfo.deviceName||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">设备IP</view><view class="value">{{': '+(equmentInfo.deviceIP||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">设备品牌</view><view class="value">{{': '+(equmentInfo.deviceBrand||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">机柜</view><view class="value">{{': '+(equmentInfo.equipmentCabinet||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">设备型号</view><view class="value">{{': '+(equmentInfo.deviceModel||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">设备SN</view><view class="value">{{': '+(equmentInfo.deviceSN||"暂无数据")+''}}</view></view><view class="assert-content-item"><view class="key">设备PN</view><view class="value">{{': '+(equmentInfo.devicePN||"暂无数据")+''}}</view></view></view></view></block><block a:if="{{currentIndex===3}}"><view class="service-content"><view class="assert-title"><image class="assert-title-image" src="../../static/images/deal_record.png"></image><text class="assert-title-text">处理记录</text></view><view class="record_group"><view class="record_content_item" style="{border-bottom:1rpx solid #C0C0C0};" a:for="{{forwardRecords}}" a:for-item="item" a:for-index="index" a:key="index"><view class="record_content_item_text"><view class="record_content_item_group"><text class="record_content_item_text_line">{{item.title}}</text><text class="record_content_item_content">{{item.context}}</text><text class="record_content_item_time">{{item.time}}</text></view></view><block a:if="{{item.imageUrl==''}}"><image class="record_content_item_image" src="../../static/images/no_image.png"></image></block><block a:else><image class="record_content_item_image" src="{{requestAddress+item.imageUrl}}" data-event-opts="{{[['tap',[['previewSignImage',['$event']]]]]}}" onTap="__e"></image></block></view></view></view></block><block a:if="{{currentIndex===4}}"><view class="service-content"><view class="assert-title"><image class="assert-title-image" src="../../static/images/known_lib.png"></image><text class="assert-title-text">知识库</text></view><view class="know_lib_group" a:for="{{knowledges}}" a:for-item="item" a:for-index="index" a:key="index"><block a:if="{{currentItem==index}}"><text data-event-opts="{{[['tap',[['clickLib',[index]]]]]}}" class="{{(('know_lib_item')+' '+((clickItem!==-1)?'know_lib_item_expand':''))}}" onTap="__e">{{index+1+'. '+item.title}}</text></block><block a:else><text data-event-opts="{{[['tap',[['clickLib',[index]]]]]}}" class="know_lib_item" onTap="__e">{{index+1+'. '+item.title}}</text></block><block a:if="{{currentItem==index&&clickItem!=-1}}"><text class="know_lib_answer_item">{{item.contentss}}</text></block></view></view></block></view></view>